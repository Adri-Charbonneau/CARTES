    <!DOCTYPE html>
    <html lang="fr">
    <!-- RESPONSIVE HEADER START HERE -->
    <head>
                <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
        <link rel="icon" href="./apple-touch-icon.png" type="image/png" sizes="57x57">
        <link rel="apple-touch-icon" href="./apple-touch-icon.png">
        <style>
            :root {--title-menu-color:#d1d1d1;--title_gradien_start:#444;--title_gradien_stop:#fff;--title_box:#444;--title_box_text:#d1d1d1;--toplevel-menu-color:#444;--highlevel-menu-color:#d1d1d1;--midlevel-menu-color:#e6e6e6;--lowlevel-menu-color:#ffcc66;--backpanel-color:#d1d1d1;--frontpanel-color:#eaeaea;--shadowpanel-color:#999;--lightshadowpanel-color:#b7b7b7;--button-color:#FFB213;--toplevel-color:#444;--menu_head:#0e0e0e;--menu_head_off:#faf9f4;--alink:black;--profile-card-color:#f5f5f5}        </style>
        <link href="https://cdnfiles1.biolovision.net/common/css/responsive_styles_w.css" rel="stylesheet" type="text/css">
        <link href="https://cdnfiles1.biolovision.net/common/css/btn-sprite_74.css" rel="stylesheet" type="text/css">

                    <style>
            @media (min-width: 1800px) {
                .tab-group {
                    margin-top: 0;
                }
                .tab-title,
                .tab-active-hidden {
                    display: block;
                }
            }
            </style>
            
        <meta name="google-site-verification" content="A7ZHcYoLG4cxy_5MLxjNGbBD4Fob__1x3Hbu7j55F1o">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <title>Résultat de la recherche - www.faune-france.org</title>
            <meta property="og:title" content="Résultat de la recherche - www.faune-france.org">
            <meta property="og:image" content="https://www.biolovision.net/logo_2021_small.png">
            <meta property="twitter:card" content="summary">
            <meta property="twitter:title" content="Résultat de la recherche - www.faune-france.org">
            <meta property="twitter:image" content="https://www.biolovision.net/logo_2021_small.png">
                    <meta name="viewport" content="width=device-width, initial-scale=1">
                <script async src="https://www.googletagmanager.com/gtag/js?id=UA-5853424-41"></script>
         <script>
            //<![CDATA[
                            startGoogleAnalytics();
                
            function startGoogleAnalytics() {

                  window.dataLayer = window.dataLayer || [];
                  function gtag(){window.dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'UA-5853424-41', {
                    cookie_flags: 'secure;SameSite=none'
                  });

                  var trackOutboundLink = function(url) {
                  gtag ('event', 'clic', {
                    'event_category': 'sortant',
                    'event_label': url,
                    'transport_type': 'balise',
                    'event_callback': function(){document.location = url;}
                  });
                }
            }
            // ]]>
        </script>
            </head>

    <body onload="if (window.OLinit){OLinit();} if (window.AEinit){AEinit();}" onunload="if (window.unload_map){unload_map();}">

    <div id="ornithobody">

                    <!--[if LT IE 10]>
            <div class="ie6">
            Votre navigateur n'est pas à jour. Pour bénéficier d'une navigation plus rapide et plus sûre,             <a class="ie6" href="http://ie.microsoft.com/">profitez dès aujourd'hui d'une mise à jour gratuite</a>.
            </div>
            <![endif]-->
        
        <div id="responsive-sidebar-left-container">
            <em id="sidebar-open" class="fa-solid fa-bars iconhome"></em>
            <a class="a-bk" href="/"><em class="fa-solid fa-home iconhome"></em></a>
                        <a href="https://play.google.com/store/apps/details?id=ch.biolovision.naturalist" style="display: none;margin-left:-5px;margin-right:0.5rem;"><em class="btn btn-naturalist btn-naturalist-android sidebar-btn"></em></a>
            <a href="https://itunes.apple.com/us/app/naturalist/id1175280268?mt=8" style="display: none;margin-left:-5px;margin-right:0.5rem;"><em class="btn btn-naturalist btn-naturalist-ios sidebar-btn"></em></a>
        </div>

        <div id="responsive-sidebar-container">
                            <div class="topLogo">                <div style="z-index:100">
                                    <a onclick="send_das_stat(10);" rel='nofollow' href='/'>
                    <img class="topleftlogo" style="" alt="www.faune-france.org" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/das/FFnoirLeger-8901.png">                    </a>

                      <script>
                         //<![CDATA[
                         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                             (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                             m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                         window.dataLayer = window.dataLayer || [];

                         window.dataLayer.push(['_setAccount', 'UA-5853424-41']);
                         window.dataLayer.push(['_trackPageview']);

                         var trackOutboundLink = function(url) {

                             window.dataLayer.push(['_trackClick', 'url', url]);
                         };

                         function send_das_stat(id_das)
                         {
                             $.post("index.php?m_id=63&content=ads_stat_click&id_ads=" + id_das,{});
                         }
                         // ]]>
                     </script>

                                    </div>

                </div>
                <div class="notlogged">faune-france.org</div>
                                    <div class="langubox">
                        <div class="langButtonSelected">fr</div><div class="langButton" 
											onmouseover="this.className='langButtonOver'" 
											onmouseout="this.className='langButton'" 
											onclick="location.href='https://www.faune-france.org/index.php?m_id=94&amp;sp_tg=19&amp;sp_DOffset=1&amp;sp_SChoice=species&amp;sp_Family=1511&amp;sp_PChoice=all&amp;sp_FDisplay=DATE_PLACE_SPECIES&amp;sp_S=24470&amp;langu=en'">
											<a class="bvLangu" href="https://www.faune-france.org/index.php?m_id=94&amp;sp_tg=19&amp;sp_DOffset=1&amp;sp_SChoice=species&amp;sp_Family=1511&amp;sp_PChoice=all&amp;sp_FDisplay=DATE_PLACE_SPECIES&amp;sp_S=24470&amp;langu=en">en</a>
											</div>                    </div>
                    
        </div>

        <div class="clearfix"></div>

        <script  src="https://cdnfiles1.biolovision.net/common/js/jquery-3.6.0.min.js"></script>
         <script>
            //<![CDATA[
            $(document).ready(function(){
                $("#login").click(function(){
                    if ($("#slidingLogin").is(":hidden")) {
                        $("#slidingLogin").slideDown("slow", function() {$("#loginemail").focus()});
                    }
                    else {
                        $("#slidingLogin").hide();
                    }
                });
            });
            // ]]>
        </script>

        
        <div id="maincontent"></div>
        <div id="td-full-content">
            <div id="td-sidebar">
                <!-- RESPONSIVE START LEFT -->
<script src="https://cdnfiles1.biolovision.net/common/js/menu_4.js"></script>
 <script>
	// <![CDATA[
	var menu = menuBuilder();
	menu.path('/');

	$(function(){

        $(".bvMenuSubTitle").click(function() {
            menu.toggleSubSub($(this).attr("id"),1);
            return false;
        }).mouseover(
          function() {
            $( this ).toggleClass("bvMenuSubTitleOFF bvMenuSubTitle");
        }).mouseout(
          function() {
            $( this ).toggleClass( "bvMenuSubTitle bvMenuSubTitleOFF");
        });

        $(".bvMenuTitle").click(function() {
            menu.toggleSub($(this).attr("id"));
            return false;
        });


    })
	// ]]>
</script>

<div id="table-sidebar" class="bvMenuBar">
	<div class="row_1st home ">
		<div class="col-xs-12">
            				<div id="conbt" onclick="javascript:menu.toggleConnect();" class="takepart takepartmenu">
					<input name="login_button" type="submit" class="submit takepartbutton" value="Participer"/>
				</div>
			    		</div>
	</div>

	<form id="confm" name="loginform" class="loginformform" action="https://www.faune-france.org/index.php" method="post">
		<input type="hidden" name="login" value="1"/>
		<div class="loginform">
			<div class="logintext">
				<input class="textlogin" id="loginemail" type="text" autocomplete="username" name="USERNAME" size="20" value=""/>
			</div>
			<div class="logintext">
				<input class="textlogin" type="password" autocomplete="current-password" name="PASSWORD" size="20"/>
			</div>
			<div class="logintext">
				<input id="remember" type="checkbox" name="REMEMBER" value="ON"/><label for="remember">mémoriser le mot de passe</label>
			</div>
			<div class="logintext">
				<a class="alink" href="https://www.faune-france.org/index.php?m_id=60">J'ai perdu mon mot de passe</a>
			</div>
		</div>

		<div class="connect">
			<input name="login_button" type="submit" class="submit" value="Me connecter"/>
		</div>
		<div class="logintext">
			<a class="alink" href="https://www.faune-france.org/index.php?m_id=61">J'aimerais m'inscrire</a>
		</div>
	</form>
	<div id="510" class="bvMenuTitle">
                               <i id="oc-t510" class="menu_title_deco fa fa-chevron-down"></i>
                               <i class="menu_title_deco_icon fa-solid fa-file-lines fa-2x"></i>
                               <div class="bvMT">Consulter</div>
                               </div><div  id="t510"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=1164'"><div class="bvMIt bvMI-pad-1">Les nouvelles</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=5&amp;sp_DOffset=5'"><div class="bvMIt bvMI-pad-1">Les observations récentes</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=7'"><div class="bvMIt bvMI-pad-1">Les galeries sons et images</div></div><div id="12" class="bvMenuSubTitle">
                               <i id="oc-t12" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Les cartes du moment</div>
                               </div><div  id="t12"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30613'"><div class="bvMIt bvMI-pad-4">Anax porte-selle 2023</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30689'"><div class="bvMIt bvMI-pad-4">Belette d'Europe 21-23</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30694'"><div class="bvMIt bvMI-pad-4">Bruant ortolan 2023</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30154'"><div class="bvMIt bvMI-pad-4">Crapaud calamite 21-23</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30215'"><div class="bvMIt bvMI-pad-4">Faucon kobez 2023</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30695'"><div class="bvMIt bvMI-pad-4">Leste à grands stigmas 22-23</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30204'"><div class="bvMIt bvMI-pad-4">Martinet pâle 18-23</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30698'"><div class="bvMIt bvMI-pad-4">Pie-grièche méridionale 2023</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=30503'"><div class="bvMIt bvMI-pad-4">Rosalie des Alpes 19-23</div></div></div><div id="68" class="bvMenuSubTitle">
                               <i id="oc-t68" class="menu_deco fa-solid fa-square-plus bvMI-pad-1"></i>
                               <div class="bi-l1t">Statistiques</div>
                               </div><div style="display:none" id="t68"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=23'"><div class="bvMIt bvMI-pad-4">Générales</div></div></div></div><div id="20115" class="bvMenuTitle">
                               <i id="oc-t20115" class="menu_title_deco fa fa-chevron-right"></i>
                               <i class="menu_title_deco_icon  fa-2x"></i>
                               <div class="bvMT">A l'action !</div>
                               </div><div style="display:none" id="t20115"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20117'"><div class="bvMIt bvMI-pad-1">Choisir mes enquêtes</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20108'"><div class="bvMIt bvMI-pad-1">Oiseaux de France</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20118'"><div class="bvMIt bvMI-pad-1">EPOC/STOC/SHOC...</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20160'"><div class="bvMIt bvMI-pad-1">Oiseaux d'eau</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20158'"><div class="bvMIt bvMI-pad-1">Rapaces</div></div></div><div id="20019" class="bvMenuTitle">
                               <i id="oc-t20019" class="menu_title_deco fa fa-chevron-right"></i>
                               <i class="menu_title_deco_icon  fa-2x"></i>
                               <div class="bvMT">Bilans et restitutions</div>
                               </div><div style="display:none" id="t20019"><div id="20107" class="bvMenuSubTitle">
                               <i id="oc-t20107" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Suivis nationaux annuels</div>
                               </div><div  id="t20107"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20165'"><div class="bvMIt bvMI-pad-4">Suivis des oiseaux</div></div></div><div id="20110" class="bvMenuSubTitle">
                               <i id="oc-t20110" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Contributions internationales</div>
                               </div><div  id="t20110"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20038'"><div class="bvMIt bvMI-pad-4">EuroBirdPortal</div></div></div></div><div id="20044" class="bvMenuTitle">
                               <i id="oc-t20044" class="menu_title_deco fa fa-chevron-right"></i>
                               <i class="menu_title_deco_icon  fa-2x"></i>
                               <div class="bvMT">En savoir plus</div>
                               </div><div style="display:none" id="t20044"><div id="20094" class="bvMenuSubTitle">
                               <i id="oc-t20094" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Tout sur Faune-France</div>
                               </div><div  id="t20094"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20012'"><div class="bvMIt bvMI-pad-4">Faune-France</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20015'"><div class="bvMIt bvMI-pad-4">L'appli NaturaList</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20084'"><div class="bvMIt bvMI-pad-4">Partenaires et mécènes</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20164'"><div class="bvMIt bvMI-pad-4">Conditions générales d'utilisation (CGU)</div></div></div><div id="20095" class="bvMenuSubTitle">
                               <i id="oc-t20095" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Données naturalistes</div>
                               </div><div  id="t20095"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20029'"><div class="bvMIt bvMI-pad-4">A quoi servent les données ?</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20037'"><div class="bvMIt bvMI-pad-4">Validation des observations</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20030'"><div class="bvMIt bvMI-pad-4">Demande de données</div></div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20120'"><div class="bvMIt bvMI-pad-1">Acteurs de Faune-France</div></div><div id="20102" class="bvMenuSubTitle">
                               <i id="oc-t20102" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Doc naturalistes</div>
                               </div><div  id="t20102"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20061'"><div class="bvMIt bvMI-pad-4">Liste des oiseaux de France</div></div></div></div><div id="20168" class="bvMenuTitle">
                               <i id="oc-t20168" class="menu_title_deco fa fa-chevron-down"></i>
                               <i class="menu_title_deco_icon  fa-2x"></i>
                               <div class="bvMT">Aides naturalistes</div>
                               </div><div  id="t20168"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20169'"><div class="bvMIt bvMI-pad-1">Aides à la détermination</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20193'"><div class="bvMIt bvMI-pad-1">Lire les bagues</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20372'"><div class="bvMIt bvMI-pad-1">Comité d'Homologation National (CHN)</div></div></div><div id="20045" class="bvMenuTitle">
                               <i id="oc-t20045" class="menu_title_deco fa fa-chevron-down"></i>
                               <i class="menu_title_deco_icon  fa-2x"></i>
                               <div class="bvMT">Aide et tutos</div>
                               </div><div  id="t20045"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20057'"><div class="bvMIt bvMI-pad-1">A l'aide ?</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20048'"><div class="bvMIt bvMI-pad-1">Quel mode de saisie ?</div></div><div id="20112" class="bvMenuSubTitle">
                               <i id="oc-t20112" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Utiliser Faune-France</div>
                               </div><div  id="t20112"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20049'"><div class="bvMIt bvMI-pad-4">Faune-France : premiers pas</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20043'"><div class="bvMIt bvMI-pad-4">Faune-France : saisie par liste</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20052'"><div class="bvMIt bvMI-pad-4">Faune-France : pointage précis</div></div></div><div id="20113" class="bvMenuSubTitle">
                               <i id="oc-t20113" class="menu_deco fa-solid fa-square-minus bvMI-pad-1"></i>
                               <div class="bi-l1t">Utiliser NaturaList</div>
                               </div><div  id="t20113"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20047'"><div class="bvMIt bvMI-pad-4">NaturaList : liste temps réel</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20055'"><div class="bvMIt bvMI-pad-4">NaturaList : pointage temps réel</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20053'"><div class="bvMIt bvMI-pad-4">NaturaList : liste plus tard</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=20056'"><div class="bvMIt bvMI-pad-4">NaturaList : pointage plus tard</div></div></div></div><div id="167" class="bvMenuTitle">
                               <i id="oc-t167" class="menu_title_deco fa fa-chevron-right"></i>
                               <i class="menu_title_deco_icon fa-solid fa-circle-info fa-2x"></i>
                               <div class="bvMT">Infos pratiques</div>
                               </div><div style="display:none" id="t167"><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=1127&amp;c=charte'"><div class="bvMIt bvMI-pad-1">Signataires Faune-France</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=1126&amp;c=partner'"><div class="bvMIt bvMI-pad-1">Partenaires Faune-France</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=156'"><div class="bvMIt bvMI-pad-1">Espèces à publication limitée</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=41'"><div class="bvMIt bvMI-pad-1">Explication des symboles</div></div><div
                            
                            onmouseover="this.className='bvMenuSubOver'"
                            onmouseout="this.className='bvMenuSub'"
                            class="bvMenuSub"
                            onclick="location.href='https://www.faune-france.org/index.php?m_id=125'"><div class="bvMIt bvMI-pad-1">les FAQs</div></div></div></div>
<!-- RESPONSIVE END LEFT -->
            </div>
            <div id="td-backdrop"></div>
<div id="td-page-content">
                        <div id="ajaxErrorMessageDisplay"></div>
         <script>
            //<![CDATA[
            //Global function that can be called by ajax functions to display error/result box
            function errorMessageDisplay(json_result)
            {
                $('#ajaxErrorMessageDisplay').empty();
                var nbre_message_success = 0;

                if(Array.isArray(json_result)){
                    json_result.forEach(function(entry) {
                        var style = entry.style;
                        var message = entry.text;
                        var status = entry.status;

                        if(typeof(style) !== "undefined" && typeof(message) !== "undefined" && typeof(status) !== "undefined")
                        {

                            if(status != "error" && status != "info" && status != "warning")
                                nbre_message_success++;

                            var class_name = 'errorMessage';

                            switch(status)
                            {
                                case 'error':
                                    class_name = 'errorError';
                                    break;
                                case 'info':
                                    class_name = 'errorInfo';
                                    break;
                                case 'warning':
                                    class_name = 'errorWarning';
                                    break;
                            }

                            var display_style = ((class_name == 'errorMessage' && style == 'fade') || style == 'overlay') ? "style=\"position:absolute; z-index:100; width:100%\"" : '';

                            var div_error_box = $('<div>',{'class' : class_name,'style':display_style});
                            div_error_box.html(message);

                            $('#ajaxErrorMessageDisplay').append(div_error_box);
                        }
                    });
                }

                if(nbre_message_success>0){
                                            $(".errorMessage").delay(6000).slideToggle(1000);
                                        }

                return nbre_message_success;
            }

            //Global function that will do some ajax on the link (we expect the link to provide utf8 json result) and it will send json to errorMessageDisplay so we can have a display of error message
            //beforeFct: function that will be called before doing any ajax call (to activate wait icon for example ...)
            //link: the url used for ajax call
            //callbackFct: function used after ajax call and after displaying ErrorMessages
            function ajaxToLink(beforeFct,used_method,link,send_data,callbackFct,sentData_contentType,sentData_processData)
            {
                beforeFct();
                $.ajax({
                    url: link,
                    method: used_method,
                    type: used_method,
                    data: send_data,
                    success: function(json_result) {
                        if(json_result===null)
                        {
                            callbackFct(0);
                        }
                        else{
                            if(typeof(json_result['data'])!='undefined')
                            {
                                var nbre_message_success = errorMessageDisplay(json_result['data']['error_messages']);
                                callbackFct(nbre_message_success,json_result['data']['result']);
                            }
                            else{
                                callbackFct(0);
                            }
                        }
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        callbackFct(0);
                    },
                    contentType: (typeof(sentData_contentType)=='undefined')?'application/x-www-form-urlencoded; charset=UTF-8':sentData_contentType,
                    processData: (typeof(sentData_processData)=='undefined')?true:sentData_processData
                });
            }
            // ]]>
        </script>
                <!-- HEADER STOP HERE -->
<div id="td-main-table"><div style="clear:both"></div>
<div class="pageTitle">Résultat de la recherche</div>

        <link rel="stylesheet" type="text/css" href="https://cdnfiles1.biolovision.net/common/js/jscalendar_1_0/calendar-bv-1-4.css"/>
		<script src="https://cdnfiles1.biolovision.net/common/js/jscalendar_1_0/calendar_f.js" ></script>
		<script src="https://cdnfiles1.biolovision.net/common/js/jscalendar_1_0/langu-utf8/calendar-fr.js" ></script>
        <script src="https://cdnfiles1.biolovision.net/common/js/jscalendar_1_0/calendar-setup_new.js" ></script>    <script src="https://cdnfiles1.biolovision.net/common/js/d3_6_7_0.min.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/d3-charts_54.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/waveform-data_5.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/autofilter_2.13_utf8.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/toggle_between_fixed_time.js" ></script>
    <link rel="stylesheet" href="https://cdnfiles1.biolovision.net/common/js/jquery.qtip-3.0.3.min.css" type="text/css" />
    <script src="https://cdnfiles1.biolovision.net/common/js/jquery.qtip-3.0.3.min.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/sprintf.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/XMLHttpRequest_3.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/openlayers_2_13_1_m6.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/proj4.js" ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/ol_map_obj_88.js"  ></script>
    <script src="https://cdnfiles1.biolovision.net/common/js/mortality_1.js" ></script>

    <script src="https://cdnfiles1.biolovision.net/common/js/jquery_ui/jquery-ui.1.13.5.js" ></script>

<link rel="stylesheet" href="https://cdnfiles1.biolovision.net/common/js/jquery_ui/jquery-ui.1.13.5.css" />
    <script src="https://cdnfiles1.biolovision.net/common/js/moment-with-locales.js" ></script>
     <script>
    //<![CDATA[
                var p_cc = '-';

                var ping_in_progress = [];
                var refreshId = [];

                var lock_async_buttons = 0;
                var lock_async_passage_buttons = 0;
                var export_type_list = {"obs_export":"OBS","passage_export":"PASSAGE"};

                $.each(export_type_list, function( index, value ) {
                    ping_in_progress[value] = 0;
                    refreshId[value] = 0;
                });

                if (!String.prototype.format) {
                    String.prototype.format = function() {
                        var args = arguments;
                        return this.replace(/{(\d+)}/g, function(match, number) {
                            return typeof args[number] != 'undefined'
                                ? args[number]
                                : match
                                ;
                        });
                    };
                }

                function buildUrl(oEvent, url, ctrlurl)
                {
                    var reg=new RegExp("(p_cc=-)", "g");
                    if (oEvent.ctrlKey && ctrlurl != '')
                        location.href = ctrlurl.replace(reg, 'p_cc=' + p_cc);
                    else
                        location.href = url.replace(reg, 'p_cc=' + p_cc);
                }

                function buildSearchUrl(oEvent, url, ctrlurl)
                {
                    var reg=new RegExp("(p_cc=-)", "g");
                    if (oEvent.ctrlKey && ctrlurl != '')
                        var href = ctrlurl.replace(reg, 'p_cc=' + p_cc);
                    else
                        var href = url.replace(reg, 'p_cc=' + p_cc);

                    // If the url is too long we convert it to a form
                    if(href.length > 2000) {
                        var form = $('<form action="index.php" method="POST" style="display:none;"></form>');
                        var url_obj = new URL("https://unused.ch/" + href);
                        for (let p of url_obj.searchParams)
                            form.append($('<input name="'+p[0]+'" value ="'+p[1]+'">'));

                        form.appendTo('body').submit();
                    }
                    else
                        location.href = href;
                }

                function setC(item, value)
                {
                    item.className='dispButton' + value;
                }

                function sC(item, value)
                {
                    item.className='dispFixButton' + value;
                }

                function startPing(export_type)
                {
                    if (refreshId[export_type] === 0)
                    {
                        refreshId[export_type] = setInterval(function(){
                            if (ping_in_progress[export_type] === 0)
                            {
                                ping_in_progress[export_type] = 1;
                                $.post("https://www.faune-france.org/index.php?m_id=1351&content=exportProgress&obid=30&offset=1&type="+export_type,{}, callbackProgress)
                                    .fail(function(jqXHR, textStatus, errorThrown) {
                                        //If something happend on the server, we send the request again in 15 sec.
                                        if(jqXHR.status >= 500 && jqXHR.status < 600) {
                                            clearInterval(refreshId[export_type]);
                                            setTimeout(function() {
                                                refreshId[export_type] = 0;
                                                ping_in_progress[export_type] = 0;
                                                startPing(export_type);
                                            }, 15000);
                                        }
                                    });
                            }
                        }, 3000);
                    }
                }

                function check_model()
                {
                    var href;
                    var link_with_model;
                    var hrefmatch;

                    if($("#export_model").length)
                    {
                       $(".export_link").each(function()
                       {
                            href = $(this).attr('href');
                            link_with_model = href;
                            hrefmatch = href.match(/sp_ExportModel=\d+/g);

                            if (hrefmatch === null)
                            {
                                link_with_model += "&sp_ExportModel=" + $("#export_model").val();
                            }
                            else
                            {
                                link_with_model = href.replace(hrefmatch[0], "sp_ExportModel=" + $("#export_model").val());
                            }

                            $(this).attr('href', link_with_model);
                       });
                    }
                    return 1;
                }

                function callbackAsyncDownload(data)
                {
                    lock_async_buttons = 0;
                    $(".waiting_download_box"+export_type_list.obs_export).remove();
                    AsyncDownloadLine(data);
                    startPing(export_type_list.obs_export);
                }

                function callbackAsyncPassageDownload(data)
                {
                    lock_async_passage_buttons = 0;
                    $(".waiting_download_box"+export_type_list.passage_export).remove();
                    AsyncDownloadLine(data);
                    startPing(export_type_list.passage_export);
                }

                function callbackProgress(data)
                {
                    AsyncDownloadList(data);
                    var type_export = data[0].type;
                    ping_in_progress[type_export] = 0;
                }

                function AsyncDownloadList(data)
                {
                    var wait_in_progress = 0;
                    if(typeof(data[0])!=='undefined') {
                        var type_export = data[0].type;


                        $.each(data, function () {
                            wait_in_progress += AsyncDownloadLine($(this)[0]);
                        });

                        if (wait_in_progress != 0 && refreshId[type_export] == 0)
                            startPing(type_export); // start pinging if a download is in progress and no timer already exist

                        if (wait_in_progress == 0 && refreshId[type_export] != 0) {
                            clearInterval(refreshId[type_export]); // stop pinging is no download in progress
                            refreshId[type_export] = 0;
                            ping_in_progress[type_export] = 0;
                        }
                    }
                }

                function AsyncDownloadLine(data)
                {
                    var ttime = moment.unix(data.start_date).locale('fr').format('ll HH:mm:ss');
                    var extension = data.file_name.substr((data.file_name.lastIndexOf('.') +1) );
                    var now = (data.last_processed_date - data.start_date === 0) ? parseInt(Date.now()/1000) : data.last_processed_date;
                    var duration = 'durée : ' + moment.utc((now - data.start_date)*1000).format("HH:mm:ss"); // .SSS for ms
                    var tr_string = 'transaction n°{0}';

                    var box_color = '#d3ffd8';

                    var file = '';
                    var wait_in_progress = 0;
                    var type_export = data.type;
                    var data_cnt = "";
                    var icon;

                    if(type_export==='OBS') {
                        var translations = {
                            PUBLIC: "Publique",
                            PRIVATE: "Privé",
                            ADMIN: "Entre administrateurs"
                        };

                        var model_title = "Détails sur le modèle d\'export : \n"
                            + "\t - Diffusion : "
                            + translations[data.privacy] + '\n'
                            + "\t - Sauter la 2ème ligne d\'entête : "
                            + (parseInt(data.skip_second_header) ? "Oui" : "Non") + "\n"
                            + "\t - Contient des informations privées : "
                            + (parseInt(data.privacy_info) > 0 ? "Oui" : "Non") + "\n";
                        data_cnt = data.em_name + " <em class='bsa ba-info' style='margin-top: 0.3rem;' title=\"" + model_title + "\"></em>" + " / " + parseInt(data.processed).toLocaleString() + " " + ((data.processed > 1) ? "données" : "donnée");
                    }

                    if (data.available == 1)
                    {
                        icon = "<em class=\"ba ba-ok\" style=\"margin:0.4rem;\" title=\"" + tr_string.format(data.id) + "\"></em>";
                        file = "<div style='margin-left: 0.4rem;display: inline-block;vertical-align: top;'>";
                        if(data.privacy_info > 0)
                            file += '<em class="fa fa-lock" style="font-size: 0.8rem;"></em>';
                        file += " <a href=\"index.php?m_id=1472&content=export&id_file=" + data.id + "\">" + data.file_name  + "</a>";
                        file += "<br/>" + data_cnt;

                        if ((extension == 'xls' && data.processed == (65536 - 2)) || (extension == 'xlsx' && data.processed == (1048576 - 2)) || (extension == 'kml' && data.processed == 10000))
                        {
                            box_color = '#FFD080';
                            file += ' <span style="color:red;font-weight:bold;font-size:0.6rem;">(maximum atteint)</span>';
                        }
                    }
                    else
                    {
                        file = '<div style=\"display: inline-block;\">';
                        if (moment().diff(moment.unix(data.last_processed_date)) > 300000) // no refresh since 300 sec
                        {
                            icon = "<em class=\"ba ba-cancel\" style=\"margin:0.4rem;\" title=\"" + tr_string.format(data.id) + "\"></em>";
                            box_color = '#E6A1A3';
                        }
                        else
                        {
                            icon = "<em class=\"ba ba-wait ba-spin\" style=\"margin:0.4rem;\"></em>";
                            wait_in_progress = 1;
                            box_color = '#ffe2b2';
                        }
                        file += "<span style='margin-left:0.4rem;line-height:1.8rem'>" + data_cnt + "</span>";
                    }

                    file += "</div>";

                    var close = "<em class=\"fa-solid fa-circle-xmark\" style=\"margin-left:0.3rem;float:right;cursor:pointer;\" title=\"" + tr_string.format(data.id) + "\" onclick='AsyncDownloadHide(" + data.id + ")'></em>"
                              + "<span style=\"font-size:0.5rem;color:#737373;float:right\">" + tr_string.format(data.id) + "</span>";

                    var line = "<div style='background-color:" + box_color + "' class='processing import_export_box row' id_export='"  + data.id + "'>"
                                + "<div class='col-sm-4'>"
                                    + icon
                                    + "<em class=\"bt bt-" + data.tg_name.toLowerCase() + "\" title=\"" + data.tg_full_name + "\"></em>"
                                    + "<div style=\"display:inline-block;margin-left:0.15rem;margin-right:0.15rem;\">" + ttime + "<br/>" + duration + "</div>"
                                + "</div>" // \col-sm-5
                                + "<div class='col-sm-6'>"
                                    + "<div style='border-left:1px solid gray;padding-left: 0.4em;'>"
                                        + "<div style='display:inline-block;margin-top: 0.4em;'><em class=\"bi bi-" + extension + "\" style=\"display:inline-block;\"></em></div>"
                                        + file
                                    + "</div>"
                                + "</div>" //\col-sm-5
                                + "<div class='col-sm-2'>"
                                    + close
                                + "</div>" //\col-sm-2
                            + "</div>";

                    if ($("div[id_export='"+ parseInt(data.id) +"']").length == 0) {
                        if(type_export==='OBS') {
                            $(".export_divs").prepend(line);
                        }else if(type_export==='PASSAGE'){
                            $(".export_passage_divs").prepend(line);
                        }
                    }
                    else {
                        $("div[id_export='" + parseInt(data.id) + "']").parent().html(line);
                    }

                    return wait_in_progress;
                }

                function AsyncDownloadHide(id) {
                    $("div[id_export="+id+"]").hide();

                    $.ajax({
                            url : 'https://www.faune-france.org/index.php?m_id=1351&content=exportHide&eid=' + id,
                            type : 'GET'
                        })
                        .fail(function( jqXHR, textStatus, errorThrown) {
                            alert( "error" );
                            $("div[id_export="+id+"]").show();
                        });
    //				alert(id);
                }

    $(document).ready(function(){

        add_click_controls();

    });

    function add_click_controls()
    {

        $(".extended_detail_button").unbind('click').click(function()
        {
            var already_opened = $(this).find(".plus").css("display")=="none";

            if(already_opened)
            {
                $(this).find(".minus").css("display","none");
                $(this).find(".plus").css("display","");
                $("#" + $(this).attr("id_feature") + "_" + $(this).attr("id_obs")).animate({
                    height: '20px',
                    width: '180px'
                  }, 750 );

                $(".clear_" + $(this).attr("id_feature") + "_" + $(this).attr("id_obs")).remove();

            }
            else
            {
                $(this).find(".plus").css("display","none");
                $(this).find(".minus").css("display","");
                $(this).find(".imgProcessing").css("display","");
                $.post("index.php?m_id=63&backlink=skip&content=extended_detail&id_obs=" + $(this).attr("id_obs") + "&id_feature=" + $(this).attr("id_feature"),{}, callbackExtDetail);
            }

        });

        $(".async_passage_download").unbind('click').click(function(event)
        {
            if(lock_async_passage_buttons === 0)
            {
                lock_async_passage_buttons = 1;

                var waitingbox = "<div class='waiting_download_box"+export_type_list.passage_export+" import_export_box' style='background-color: #ffe2b2;padding-bottom: 10px; float:none;'><em class='ba ba-wait ba-spin' style='margin:0.4rem;'></em></div>";
                $(".export_passage_divs").prepend(waitingbox);

                var add_to_href = "";

                if ($('input[name="greyscale"]').prop('checked')) {
                    add_to_href += "&greyscale=1";
                }

                if ($('input[name="greyline"]').prop('checked')) {
                    add_to_href += "&greyline=1";
                }

                if ($('input[name="alpha"]').prop('checked')) {
                    add_to_href += "&alpha=1";
                }

                if ($('input[name="hdmap"]').prop('checked')) {
                    add_to_href += "&hdmap=1";
                }

                $.post($(this).attr("href")+add_to_href, {}, callbackAsyncPassageDownload);
            }
        });

        $(".async_download").unbind('click').click(function(event)
        {
            if(lock_async_buttons === 0)
            {
                lock_async_buttons = 1;

                var waitingbox = "<div class='waiting_download_box"+export_type_list.obs_export+" import_export_box' style='background-color: #ffe2b2;padding-bottom: 10px; float:none;'><em class='ba ba-wait ba-spin' style='margin:0.4rem;'></em></div>";
                $(".export_divs").prepend(waitingbox);
                check_model();
                $.post($(this).attr("href"), {}, callbackAsyncDownload);
            }
        });

        function callbackExtDetail(xmlData)
        {
            var id_content = $(xmlData).find('id_obs').text();
            var id_feature = $(xmlData).find('id_feature').text();

            var content  = $("content_data", xmlData).text();

            $("#" +id_feature + "_" + id_content).before("<div class='clear_" + id_feature + "_" + id_content +"' style='clear:both'></div>");
            $("#" +id_feature + "_" + id_content).after("<div class='clear_" + id_feature + "_" + id_content +"' style='clear:both'></div>");
            $("#" + id_feature + "_" + id_content).width(500);

            $("#content_" + id_feature + "_" + id_content).html(content);

            h = $("#content_" + id_feature + "_" + id_content).height() + 30;

            $("#" + id_feature + "_" + id_content).animate({
                height: h + 'px'
              }, 750, function() {$(".imgProcessing").css("display","none");} );
        }
    }
    // ]]>
                </script>
            <div class="taxon-bar">
            <em class="taxon-bar-arrow taxon-bar-arrow-left btn btn-left-circ" style="display:none;"></em>
            <em class="taxon-bar-arrow taxon-bar-arrow-right btn btn-right-circ" style="display:none;"></em>
            <div class="taxon-bar-pictogram-container box" style="height:46px;">
                        <a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_1"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=1"><i class="bt bt-taxo_group_bird" title="Oiseaux"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_3"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=3"><i class="bt bt-taxo_group_mammal" title="Mammifères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_4"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=4"><i class="bt bt-taxo_group_sea_mammal" title="Mammifères marins"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_6"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=6"><i class="bt bt-taxo_group_reptilian" title="Reptiles"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_7"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=7"><i class="bt bt-taxo_group_amphibian" title="Amphibiens"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_8"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=8"><i class="bt bt-taxo_group_odonata" title="Odonates"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_9"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=9"><i class="bt bt-taxo_group_butterfly" title="Papillons de jour"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_10"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=10"><i class="bt bt-taxo_group_moth" title="Papillons de nuit"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_11"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=11"><i class="bt bt-taxo_group_orthoptera" title="Orthoptères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_12"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=12"><i class="bt bt-taxo_group_hymenoptera" title="Hyménoptères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_18"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=18"><i class="bt bt-taxo_group_mantodea" title="Mantes"></i></a><a class="bvMenuSubOFF bvMenuSubTaxo bvMenuSubTaxoButton"
                     id="taxo_tools_icon_19"
                     style=""><i class="bt bt-taxo_group_auchenorrhyncha" title="Cigales"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_20"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=20"><i class="bt bt-taxo_group_heteroptera" title="Punaises"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_21"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=21"><i class="bt bt-taxo_group_coleoptera" title="Coléoptères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_22"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=22"><i class="bt bt-taxo_group_nevroptera" title="Nevroptères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_25"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=25"><i class="bt bt-taxo_group_diptera" title="Diptères"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_26"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=26"><i class="bt bt-taxo_group_phasmatodea" title="Phasmes"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_27"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=27"><i class="bt bt-taxo_group_arachnida" title="Araignées"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_28"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=28"><i class="bt bt-taxo_group_scorpiones" title="Scorpions"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_29"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=29"><i class="bt bt-taxo_group_fish" title="Poissons"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_30"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=30"><i class="bt bt-taxo_group_malacostraca" title="Ecrevisses"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_31"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=31"><i class="bt bt-taxo_group_gastropoda" title="Gastéropodes"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_32"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=32"><i class="bt bt-taxo_group_bivalvia" title="Bivalves"></i></a><a class="bvMenuSub bvMenuSubTaxo bvMenuSubTaxoButton"
                    id="taxo_tools_icon_33"
                    style="" href="index.php?m_id=94&amp;&amp;m_id=8&amp;sp_tg=19&amp;sp_tg=33"><i class="bt bt-taxo_group_branchiopoda" title="Branchiopodes"></i></a>            </div> <!-- \.taxon-bar-pictogram-container -->
        </div> <!-- \.taxon-bar -->

        <div class="clearfix"></div>
        <div class="clearfix"></div>
<div class="box flex-box">
    <div class="row">
        <div class="col-sm-20">
            <div class="flex-title">Période</div>
        </div>
        <div class="col-sm-80">Les 1 derniers jours        </div>
    </div>
    <div class="row">
        <div class="col-sm-20">
            <div class="flex-title">Espèce</div>
        </div>
        <div class="col-sm-80"><i class="bsa ba-orange" title="Attention : détermination sur le terrain qui nécessite un examen détaillé ! Observation des critères à la longue-vue (vertébrés), à la loupe à main (invertébrés) ou détermination acoustique. Pour être validée, cette donnée doit être documentée (mention des critères discriminants observés, photos, enregistrements sonores)."></i>&nbsp;<span style="color:#000000"><b>Cigalette du Fango</b> <span class="sci_name">(Cicadetta fangoana)</span></span>        </div>
    </div>
    <div class="row" style="overflow: hidden;">
        <div class="col-sm-20">
            <div class="flex-title">Lieu</div>
        </div>
        <div class="col-sm-80">Tous les lieux-dits        </div>
    </div>
    <div class="row">
        <div class="col-sm-20">
            <div class="flex-title">Restriction</div>
        </div>
        <div class="col-sm-80"><div class="dispButton" onmouseover="setC(this,'Over')" onmouseout="setC(this,'')" onclick="buildSearchUrl(event, 'index.php?m_id=94&amp;p_c=duration&amp;p_cc=-&amp;sp_tg=19&amp;sp_DateSynth=04.08.2023&amp;sp_DChoice=offset&amp;sp_DOffset=1&amp;sp_SChoice=species&amp;sp_S=24470&amp;sp_PChoice=all&amp;sp_OnlyWithPicture=1&amp;sp_FChoice=list&amp;sp_FGraphFormat=auto&amp;sp_FMapFormat=none&amp;sp_FDisplay=DATE_PLACE_SPECIES&amp;sp_FOrder=ALPHA&amp;sp_FOrderListSpecies=ALPHA&amp;sp_FListSpeciesChoice=DATA&amp;sp_FOrderSynth=ALPHA&amp;sp_FGraphChoice=DATA&amp;sp_DFormat=DESC&amp;sp_FAltScale=250&amp;sp_FAltChoice=DATA&amp;sp_FExportFormat=XLS', '')">avec photos</div><div class="dispButton" onmouseover="setC(this,'Over')" onmouseout="setC(this,'')" onclick="buildSearchUrl(event, 'index.php?m_id=94&amp;p_c=duration&amp;p_cc=-&amp;sp_tg=19&amp;sp_DateSynth=04.08.2023&amp;sp_DChoice=offset&amp;sp_DOffset=1&amp;sp_SChoice=species&amp;sp_S=24470&amp;sp_PChoice=all&amp;sp_OnlyWithSound=1&amp;sp_FChoice=list&amp;sp_FGraphFormat=auto&amp;sp_FMapFormat=none&amp;sp_FDisplay=DATE_PLACE_SPECIES&amp;sp_FOrder=ALPHA&amp;sp_FOrderListSpecies=ALPHA&amp;sp_FListSpeciesChoice=DATA&amp;sp_FOrderSynth=ALPHA&amp;sp_FGraphChoice=DATA&amp;sp_DFormat=DESC&amp;sp_FAltScale=250&amp;sp_FAltChoice=DATA&amp;sp_FExportFormat=XLS', '')">avec sons</div>        </div>
    </div>
    </div>
    <div id="observation_content"></div>

    <div class="observation_content_bottom">
        <em id="observation_content_wait" class="fa-solid fa-spinner fa-spin fa-1x-spin"></em>

        <div id="observation_content_finished">
            <em class="fa-solid fa-circle-check fa-circle-check-rotate"></em>
        </div>
    </div>

    <div id="back-to-top" class="back_to_top">
        <em class="fa-solid fa-circle-up fa-2x"></em>
    </div>
    <script>
        $(document).ready(function() {
            $(window).scroll(function() {
                if ($(this).scrollTop() > 100) {
                    $('#back-to-top').fadeIn();
                } else {
                    $('#back-to-top').fadeOut();
                }
            });

            $('#back-to-top').click(function() {
                $('html, body').animate({scrollTop: 0}, 800);
                return false;
            });
        });
    </script>
            <script>
        //<![CDATA[
        function make_specie_string(id_sp, latin_name, species_name, species_name_plur, is_short, is_html, birds_count, taxo_no_result_id, remove_spliters) {
            /*Default values if not defined*/
            if(typeof(species_name_plur)=='undefined') {
                species_name_plur = '';
            }
            if(typeof(is_short)=='undefined') {
                is_short = 0;
            }
            if(typeof(is_html)=='undefined') {
                is_html = 1;
            }
            if(typeof(birds_count)=='undefined') {
                birds_count = '1';
            }
            if(typeof(taxo_no_result_id)=='undefined') {
                taxo_no_result_id = 10000;
            }
            if(typeof(remove_spliters)=='undefined') {
                remove_spliters = 1;
            }

            
            var is_plural = 1;
            if (birds_count === '1' || birds_count === '~1' || birds_count === '>1' || birds_count === '&ge;1' || birds_count === '0' || birds_count === '')
                is_plural = 0;

            if (species_name === '')
                species_name = latin_name;

            if (species_name_plur === '')
                species_name_plur = species_name;

            var bird_name = '';
            if (is_html)
                bird_name += ((birds_count === '0') && (id_sp !== taxo_no_result_id)) ? '<strike>' : '';

            bird_name += is_plural ? species_name_plur : species_name;

            if(remove_spliters)
                bird_name = bird_name.replace(/[|]/g,'');

            if (is_html)
                bird_name += ((birds_count === '0') && (id_sp !== taxo_no_result_id)) ? '</strike>' : '';

            if (is_short)
            {
                if (!is_html)
                    return bird_name;
                return 0? "<b><i>" + bird_name + "</i></b>" : "<b>" + bird_name + "</b>";
            }
            else
            {
                var latin_name_str = latin_name; //str_replace(" ", "&nbsp;", $latin_name);
                if (is_html)
                {
                    if ((latin_name !== '') && (latin_name !== species_name))
                        return 0? "<b><i>"+bird_name+"</i></b> ("+latin_name_str+")" : "<b>"+bird_name+"</b> (<i>"+latin_name_str+"</i>)";
                    else
                        return "<b><i>"+bird_name+"</i></b>";
                }
                else
                {
                    if ((latin_name !== '') && (latin_name !== species_name))
                        return  bird_name+" ("+latin_name_str+")";
                    else
                        return  bird_name;
                }
            }
        }
        // ]]>
        </script>
        <script  src="https://cdnfiles1.biolovision.net/common/js/query_ajax_endpage_18.js"></script>

<script>
//<![CDATA[
var obsQueryEndPage;
var scroll_positon = 0;
var load_sync = 0;
var obs_level1_offset = 0;  // Used in rarity map
var full_page_sightings = [];
var data_n_minus_1 = null;
var level_1 = null;
var level_2 = null;
var level_3 = null;
var level_sighting = null;
var last_sighting = null;
var last_titles_displayed = [];

$(function(){
        var use_more_btn = $(window).width() <= 900 && $("#observation_content_more").length;

    obsQueryEndPage = queryEndPage()
    .mp_current_page(0)
    .request("index.php?m_id=1351&content=observations_by_page&backlink=skip&p_c=duration&p_cc=-&sp_tg=19&sp_DateSynth=04.08.2023&sp_DChoice=offset&sp_DOffset=1&sp_SChoice=species&sp_S=24470&sp_PChoice=all&sp_FChoice=list&sp_FGraphFormat=auto&sp_FMapFormat=none&sp_FDisplay=DATE_PLACE_SPECIES&sp_FOrder=ALPHA&sp_FOrderListSpecies=ALPHA&sp_FListSpeciesChoice=DATA&sp_FOrderSynth=ALPHA&sp_FGraphChoice=DATA&sp_DFormat=DESC&sp_FAltScale=250&sp_FAltChoice=DATA&sp_FExportFormat=XLS")
    .element_id("#observation_content")
    .element_wait_id("#observation_content_wait")
    .element_finish_id("#observation_content_finished")
    .callback(display_obs)
    .checkAllLoadedcallback(is_data_complete)
    .load_all(0);

	if(use_more_btn) {
		obsQueryEndPage.load_more_offset(1)
			.load_more_button($("#observation_content_more"));
	}

        obsQueryEndPage.start();
    });

function add_icon_reload(id_observation)
{
    $("span[id_sighting='" + id_observation + "']").css("background-color", "#eeeeee");
    $("span[id_sighting='" + id_observation + "'] img").each(function()
    {
        $(this).css("filter","grayscale(100%)");
    });
    $("span[id_sighting='" + id_observation + "'] .reload").html("<i class=\"bi bi-refresh ba-spin\" onclick='reloadAllPages(" + id_observation + ")' title=\"ADD_MAIN_FORM_TEXT_REFRESH\"></i>");
}

function reloadAllPages(id_triggering_reload)
{
    //Empty the page
    $("#observation_content").html("");
    //Start reload
    var selector_reload = "span[id_sighting='" + id_triggering_reload + "']";
    obsQueryEndPage.reloadAll(selector_reload);
}

function is_data_complete(data)
{
    return (typeof(data.data_is_finished)!='undefined' && data.data_is_finished===1)
}

function reset_display_obs()
{
    obsQueryEndPage = null;
    reset_display_obs_variables();
}

function reset_display_obs_variables() {
    last_titles_displayed = [];
    level_1 = null;
    level_2 = null;
    level_3 = null;
    level_sighting = null;
    last_sighting = null;
}

function display_obs(txid, data)
{
    if(!obsQueryEndPage) {
        return false;
    }

    
    var toggle_callback = null;

    var container = $('#observation_content');

    // Merge last sighting
    if(level_sighting && data.length) {
        var merged_obs = merge_obs(last_sighting, data[0]);

        if(merged_obs) {
            level_sighting.remove();
            data[0] = merged_obs;
        }
	}

	$.each(data, function (index)
	{
		var sighting = data[index];

		if(typeof(sighting.listTop)!=='undefined' && typeof(sighting.listSubmenu)!=='undefined')
		{
			var new_level_1 = build_main_title(sighting, toggle_callback, );
			if(new_level_1 !== null && level_1 !== null) {
				level_1 = new_level_1;
				container.append(level_1);
			}
			else if(new_level_1 !== null) {
				// Init
				level_1 = new_level_1;
				container.append(level_1);
			}

			var new_level_2 = build_second_title(sighting, toggle_callback);
			if(new_level_2 !== null && level_2 !== null) {
				level_2 = new_level_2;
				level_1.append(level_2);
			}
			else if(new_level_2 !== null) {
				// Init
				level_2 = new_level_2;
				level_1.append(level_2);
			}

			level_sighting = build_obs(sighting);
			level_3.append(level_sighting);
		}
	});

    //We need to add controls again for all new observations that were created (so that + button can be clicked on extended details)
    add_click_controls();
    return true;
}

function build_main_title(data, _ )
{
    // Check if level 1 title is not already displayed
    if('level_1' in last_titles_displayed && data.listTop.title == last_titles_displayed['level_1']) {
        return null;
    }

    obs_level1_offset++;  // Used in rarity map
    var main_level_1 = $('<div>', {'class': "listContainer"});

    // If title level 1 is not displayed, we reset all
    last_titles_displayed['level_2_title'] = '';
    last_titles_displayed['level_2_href'] = '';
    last_titles_displayed['level_1'] = data.listTop.title;

    return main_level_1.append($('<div>', {'class': "listTop"}).html(data.listTop.title)).append($('<div>', {'class' : "obs_level_2_i_content"}));
}

function build_second_title(data, _) {
    if('level_2_title' in last_titles_displayed && data.listSubmenu.title == last_titles_displayed['level_2_title'] && data.listSubmenu.href == last_titles_displayed['level_2_href'])
        return null;

    var main_content = $('<div>' , {'class': "obs_level_2_i_content", 'style':"display:block"}).append($('<div>', {'class': "obs_level_2_i_container"}));
    var listSubmenu = $('<div>', {'class': "listSubmenu"});

    if(listSubmenu) {
        listSubmenu.append(build_link(data.listSubmenu.title, data.listSubmenu.href));
        }

    level_3 = $('<div>',{'class' : "listObservation"});
    last_titles_displayed['level_2_title'] = data.listSubmenu.title;
    last_titles_displayed['level_2_href'] = data.listSubmenu.href;

    return main_content.append(listSubmenu).append(level_3);
}

function merge_obs(s1, s2)
{
    if(s1.listTop.title != s2.listTop.title)
        return false;

    if(s1.listSubmenu.title != s2.listSubmenu.title && s1.listSubmenu.href != s2.listSubmenu.href)
        return false;

    if(s1.species_array.latin_name != s2.species_array.latin_name)
        return false;


    s1.is_hidden = Math.max(s1.is_hidden, s2.is_hidden);
    s1.is_admin_hidden = Math.max(s1.is_admin_hidden, s2.is_admin_hidden);
    s1.is_new = Math.max(s1.is_new, s2.is_new);
    s1.is_second_hand = Math.max(s1.is_second_hand, s2.is_second_hand);
    s1.no_link = Math.max(s1.no_link, s2.no_link);
    s1.show_transparent = Math.max(s1.show_transparent, s2.show_transparent);
    s1.is_favorite = Math.max(s1.is_favorite, s2.is_favorite);
    s1.print_incomplete = Math.max(s1.print_incomplete, s2.print_incomplete);

    // No need to merge protocol details.
    // protocol_name
    // protocol_svg
    // protocol_show_extended_details

    if(s1.admin_hidden_type && s2.admin_hidden_type)
    {
        if(s1.admin_hidden_type == 'question' || s2.admin_hidden_type == 'question')
            s1.admin_hidden_type = 'question';
        if(s1.admin_hidden_type == 'refused' || s2.admin_hidden_type == 'refused')
            s1.admin_hidden_type = 'refused';
    }
    else if(s2.admin_hidden_type)
        s1.admin_hidden_type = s2.admin_hidden_type;

	if(s1.opt_observer_logged_links && s2.opt_observer_logged_links)
    	s1.opt_observer_logged_links = s1.opt_observer_logged_links.concat(s2.opt_observer_logged_links);
	else if(s2.opt_observer_logged_links)
		s1.opt_observer_logged_links = s2.opt_observer_logged_links;

    for(var i = 0 ;  i < s2.opt_observers.length ; i++)
    {
        var id_observer = s2.opt_observers[i].id;
        var matched = false;
		var same_sight_matched = false; // More chunk just for pictures.

        for(var j = 0 ; j < s1.opt_observers.length ; j++)
        {
            if(s1.opt_observers[j].id === id_observer)
            {

				if(s2.opt_observers[i].opt_observer_info.length === 1)
				{
					for(var k = 0 ; k < s1.opt_observers[j].opt_observer_info.length ; k++)
					{
					    if (typeof s1.opt_observers[j].opt_observer_info[k] !== 'undefined' && typeof s2.opt_observers[i].opt_observer_info[k] !== 'undefined'
                           &&
                            s1.opt_observers[j].opt_observer_info[k].id_sighting === s2.opt_observers[i].opt_observer_info[k].id_sighting)
						{
							same_sight_matched = true;
							break;
						}
					}
				}

				if(!same_sight_matched) {
                    s1.opt_observers[j].opt_observer_info = s1.opt_observers[j].opt_observer_info.concat(s2.opt_observers[i].opt_observer_info);
                }

                matched = true;
                break;
            }
        }

		if(!matched) {
			s1.opt_observers.push(s2.opt_observers[i]);
		}
    }

	// s1 is ref
	if(!same_sight_matched) {
		if (s1.detail_list && s2.detail_list)
			s1.detail_list = s1.detail_list.concat(s2.detail_list);
		else if (s2.detail_list)
			s1.detail_list = s2.detail_list;

		s1.remarks = s1.remarks.concat(s2.remarks);
	}
    // s1.opt_observers[0].opt_observer_info = s1.opt_observers[0].opt_observer_info.concat(s2.opt_observers[0].opt_observer_info);
    s1.print_incomplete = Math.max(s1.print_incomplete, s2.print_incomplete);
    if("opt_media_list" in s1 && "opt_media_list" in s2)
    s1.opt_media_list = Object.assign({},s1.opt_media_list, s2.opt_media_list);
    else if("opt_media_list" in s2)
    s1.opt_media_list = s2.opt_media_list;
    s1.remarks_hidden = s1.remarks_hidden.concat(s2.remarks_hidden);

    s1.birds_count = generate_count(s1.opt_observers, s1);
    return s1;
}

function generate_count(observers, sighting)
{
    var max_count = 0;
    var min_count = 1000000000;
    var sum_count = {};
    var modifier = 0;

    for(var i = 0 ; i < observers.length ; i++) {
        var id = "" + observers[i].id.toString();
        var info = observers[i].opt_observer_info;

        for (var j = 0; j < info.length; j++) {
                var data = info[j];

                if(!(id in sum_count))
                sum_count[id] = 0;

                sum_count[id] = sum_count[id] + parseInt(data['count']);

                switch (data['estimation_code']) {
                case 'MINIMUM':
                modifier = modifier|1; // 0001b
                break;
                case 'ESTIMATION':
                modifier = modifier|2; // 0010b
                break;
                case 'NO_VALUE':
                modifier = modifier|4; // 0100b
                break;
                case 'EXACT_VALUE':
                modifier = modifier|8; // 1000b
                break;
            }
        }
    }

    for(var idx in sum_count)
    {
        var count = sum_count[idx];

        if (count <= min_count)
            min_count = count;

        if (count >= max_count)
            max_count = count;
    }


    if(max_count > 1) {
		if("DATE_PLACE_SPECIES" == 'SPECIES_PLACE_DATE' || "DATE_PLACE_SPECIES" == 'PLACE_SPECIES_DATE')
			sighting.sighting_detail = make_birds_string(max_count, sighting);
		else
			sighting.sighting_detail = make_specie_string(sighting.species_array.id, sighting.species_array.latin_name, sighting.species_array.name, sighting.species_array.name_plur, 0, 1, max_count);
	}

    return generate_count_string(modifier, min_count, max_count);
}


function make_birds_string(birds_count, sighting)
{
	var ret_s = "";
	if (birds_count != '')
	{
		if (birds_count == '0')
			ret_s = ret_s + '<strike>';
		else if(birds_count < 2)
			ret_s = ret_s + "individu";
		else
			ret_s = ret_s + "individus";

		if (birds_count == '0')
			ret_s = ret_s + '</strike>';
	}
	else
	{
		ret_s = "non compté";
	}

	return ret_s + ",&nbsp;" + sighting.date;
}



function generate_count_string(modifier, min_count, max_count)
{
    var modifier_string = '';

    switch(modifier)
    {
        case 1: // 0001b - > - >
        case 5: // 0101b - N> - >
        case 9: // 1001b - E> - >
        case 13: // 1101b - EN> - >
            modifier_string = '>';
            break;

        case 2: // 0010b - ~ - ~
        case 3: // 0011b - >~ - ~
        case 6: // 0110b - N~ - ~
        case 7: // 0111b - N~> - ~
        case 10: // 1010b - E~ - ~
        case 11: // 1011b - E~> - ~
        case 14: // 1110b - EN~ - ~
        case 15: // 1111b - EN~> - ~
            modifier_string = '~';
            break;

        case 4: // 0100b - N - N
            modifier_string = '×';
            break;

        case 8: // 1000b - E - E
        case 12: // 1100b - EN - E
            modifier_string = '';
            break;
    }


    if (min_count == max_count)
    {
        if (min_count == 0)
            if (modifier == 8)
                return '0';
            else
                return modifier_string;
        return modifier_string+min_count;
    }
    else
    {
        if (min_count == 0)
            return modifier_string +max_count;

        return modifier_string+min_count+'-'+max_count
    }
}

function build_obs(sighting)
{
    last_sighting = sighting;
    sighting.obs_level1_offset = obs_level1_offset; // Used in rarity map
    full_page_sightings.push(sighting);

    var observation_container = $('<div>',{'class' : "observation_container"});

    var before_opt_observer = $('<div>',{'class' : "before_opt_observer"});
    var first_images = generate_image(sighting.species_array, sighting.day_number, sighting.is_hidden, !sighting.print_incomplete && sighting.admin_hidden_type == 'incomplete'? 0 : sighting.is_admin_hidden, sighting.is_new, 0, 0, 0, sighting.is_favorite, sighting.protocol_name, sighting.protocol_svg, sighting.admin_hidden_type);
    var before_elem = $('<span>',{'class' : "sighting_detail",'style' : "color:"+sighting.rarity_color}).html(first_images+" <span class=\"sighting_count\">"+sighting.birds_count+"</span> ");

    var sighting_detail = $('<span>',{'class' : "sighting_detail",'style' : "margin-right:0.2rem;color:"+sighting.rarity_color}).html(sighting.sighting_detail);

    // Status icons
    before_opt_observer
    .append(before_elem)
    .append(sighting_detail);

        if(typeof(sighting.opt_observer_logged_links)!=='undefined')
    {
        var obs_links = sighting.opt_observer_logged_links;
        $.each(obs_links, function (index)
        {
            var img_link = obs_links[index];
            before_opt_observer.append(build_img_link(img_link.class, img_link.href,img_link.img,img_link.img_title));
        });
    }
    
    observation_container.append(before_opt_observer);

        //Observer
    if(typeof(sighting.opt_observers)!=='undefined')
    {
        var opt_observers_data = sighting.opt_observers;
        var opt_observer_info_container = $('<div>',{'class':'opt_observer'});
        $.each(opt_observers_data, function (index)
        {
            var observer_data = opt_observers_data[index];
            if(typeof(observer_data.opt_observer_info)!=='undefined')
            opt_observer_info_container.append(build_observer(observer_data.opt_observer_info));
        });
        observation_container.append(opt_observer_info_container);
    }

    var after_opt_observer = $('<div>',{'class' : "after_opt_observer"});
        //Extended detail
    if(typeof(sighting.opt_extended_details)!=='undefined')
    {
        var extended_details_data = sighting.opt_extended_details;
        $.each(extended_details_data, function (index)
        {
            var extended_detail = extended_details_data[index];
            var id_sighting_string = get_id_observation_for_extended_detail(sighting.opt_observers[0]);
            after_opt_observer.append(build_extended_detail(id_sighting_string, extended_detail.color, extended_detail.feature, extended_detail.title));
        });
    }

    //remarks
    if(typeof(sighting.remarks)!=='undefined')
    {
        var remarks_list = sighting.remarks;
        $.each(remarks_list, function (index)
        {
            var remark_data = remarks_list[index];
            after_opt_observer.append($('<div>',{'class':'remark'}).html(remark_data.title+remark_data.content));
        });
    }

    //hidden remarks
    if(typeof(sighting.remarks_hidden)!=='undefined')
    {
        var remarks_hidden_list = sighting.remarks_hidden;
        $.each(remarks_hidden_list, function (index)
        {
            var remark_data = remarks_hidden_list[index];
            after_opt_observer.append($('<div>',{'class':'hidden_remark'}).html(remark_data.title+remark_data.content));
        });
    }

    //Atlas code
    if(typeof(sighting.atlas_list)!=='undefined')
    {
        var atlas_list = sighting.atlas_list;
        $.each(atlas_list, function (index)
        {
            var atlas_list_data = atlas_list[index];
            after_opt_observer.append($('<div>',{'class':'bodynocolor','style':'color:#008000'}).html(atlas_list_data.title+" : "+atlas_list_data.content));
        });
    }

    //Details
    if(typeof(sighting.detail_list)!=='undefined')
    {
        var detail_list = sighting.detail_list;
        $.each(detail_list, function (index)
        {
            var detail_list_data = detail_list[index];
            after_opt_observer.append($('<div>',{'class':'bodynocolor'}).html(detail_list_data.title+" : "+detail_list_data.content));
        });
    }
    
    //Images
    if(typeof(sighting.opt_media_list)!=='undefined')
    {
        var container_thumbnails = $('<div>',{'class' : "thumbnail_container"});
        for (var mid in sighting.opt_media_list) {
            if (sighting.opt_media_list.hasOwnProperty(mid)) {
                var container_mid = $('<div>',{
                    'id' : "mid_list_"+mid,
                    'style' : "width:unset;",
                    'class' : "gSmallPhoto",
                    'onclick' : "link_sighting_media_details("+mid+")"
                });

                var currentMediaInfo = sighting.opt_media_list[mid];
                container_mid.html(get_visual_js(mid, currentMediaInfo['title'], parseInt(currentMediaInfo['thumbnail_size']) , currentMediaInfo['full_webpath_thumbnail'], 'n', currentMediaInfo['type'] == 'VIDEO' ? 0 : 1, 'media_mid', parseInt(currentMediaInfo['media_is_hidden']),parseInt(currentMediaInfo['png']), currentMediaInfo['code']));
                container_thumbnails.append(container_mid);
            }
        }
        after_opt_observer.append(container_thumbnails);
        after_opt_observer.append($('<div>',{'style' : "clear:both"}));
    }

    observation_container.append(after_opt_observer);

    
    return observation_container
}

function get_id_observation_for_extended_detail(opt_observer)
{
    var id_obs = [];
    opt_observer.opt_observer_info.forEach(function(observer) {
        id_obs.push(observer.id_sighting);
    });
    return id_obs.join('-');
}

function build_map_resume(sighting)
{
    var observation_container = $('<div>',{'class' : "observation_container"});

    var before_opt_observer = $('<div>',{'class' : "before_opt_observer"});
    before_opt_observer.append($('<span>', {'class' : "text-bold"}).html(sighting.date + " "));
    var first_images = generate_image(sighting.species_array, sighting.day_number, sighting.is_hidden, !sighting.print_incomplete && sighting.admin_hidden_type == 'incomplete'? 0 : sighting.is_admin_hidden, sighting.is_new, 0, 0, 0, sighting.is_favorite, sighting.protocol_name, sighting.protocol_svg, sighting.admin_hidden_type);
    var before_elem = $('<span>',{'class' : "sighting_detail",'style' : "color:"+sighting.rarity_color}).html(first_images+" "+sighting.birds_count+" <span title=\"" + sighting.species_array.latin_name + "\">" + (sighting.birds_count > 1 ? sighting.species_array.name_plur : sighting.species_array.name) + " </span>");


    before_opt_observer.append(before_elem);

    if(typeof(sighting.opt_observer_logged_links)!=='undefined')
    {
        var obs_links = sighting.opt_observer_logged_links
        $.each(obs_links, function (index)
        {
            var img_link = obs_links[index];
            before_opt_observer.append(build_img_link(img_link.class, img_link.href,img_link.img,img_link.img_title));
        });
    }

    observation_container.append(before_opt_observer);

    //Observer
    if(typeof(sighting.opt_observers)!=='undefined')
    {
        var opt_observers_data = sighting.opt_observers;
        var opt_observer_info_container = $('<div>',{'class':'opt_observer'})
        $.each(opt_observers_data, function (index)
        {
            var observer_data = opt_observers_data[index];
            if(typeof(observer_data.opt_observer_info)!=='undefined')
                opt_observer_info_container.append(build_observer(observer_data.opt_observer_info));
        });
        observation_container.append(opt_observer_info_container);
    }

    var after_opt_observer = $('<div>',{'class' : "after_opt_observer"});
    //Extended detail
    if(typeof(sighting.opt_extended_details)!=='undefined')
    {
        var extended_details_data = sighting.opt_extended_details;
        $.each(extended_details_data, function (index)
        {
            var extended_detail = extended_details_data[index];
            after_opt_observer.append(build_extended_detail(sighting.id_sighting, extended_detail.color, extended_detail.feature, extended_detail.title));
        });
    }

    //remarks
    if(typeof(sighting.remarks)!=='undefined')
    {
        var remarks_list = sighting.remarks;
        $.each(remarks_list, function (index)
        {
            var remark_data = remarks_list[index];
            after_opt_observer.append($('<div>',{'class':'remark'}).html(remark_data.title+remark_data.content));
        });
    }

    //hidden remarks
    if(typeof(sighting.remarks_hidden)!=='undefined')
    {
        var remarks_hidden_list = sighting.remarks_hidden;
        $.each(remarks_hidden_list, function (index)
        {
            var remark_data = remarks_hidden_list[index];
            after_opt_observer.append($('<div>',{'class':'hidden_remark'}).html(remark_data.title+remark_data.content));
        });
    }

    //Atlas code
    if(typeof(sighting.atlas_list)!=='undefined')
    {
        var atlas_list = sighting.atlas_list;
        $.each(atlas_list, function (index)
        {
            var atlas_list_data = atlas_list[index];
            after_opt_observer.append($('<div>',{'class':'bodynocolor','style':'color:#008000'}).html(atlas_list_data.title+" : "+atlas_list_data.content));
        });
    }

    //Details
    if(typeof(sighting.detail_list)!=='undefined')
    {
        var detail_list = sighting.detail_list;
        $.each(detail_list, function (index)
        {
            var detail_list_data = detail_list[index];
            after_opt_observer.append($('<div>',{'class':'bodynocolor'}).html(detail_list_data.title+" : "+detail_list_data.content));
        });
    }

    //Images
    if(typeof(sighting.opt_media_list)!=='undefined')
    {
        var container_thumbnails = $('<div>',{'class' : "thumbnail_container"});
        for (var mid in sighting.opt_media_list) {
            if (sighting.opt_media_list.hasOwnProperty(mid)) {
                var container_mid = $('<div>',{
                    'id' : "mid_list_"+mid,
                    'style' : "width:unset;",
                    'class' : "gSmallPhoto",
                    'onclick' : "link_sighting_media_details("+mid+")"
                });

                var currentMediaInfo = sighting.opt_media_list[mid];
                container_mid.html(get_visual_js(mid, currentMediaInfo['title'], parseInt(currentMediaInfo['thumbnail_size']) , currentMediaInfo['full_webpath_thumbnail'], 'n', 1, 'media_mid', parseInt(currentMediaInfo['media_is_hidden']),parseInt(currentMediaInfo['png']), currentMediaInfo['code']));
                container_thumbnails.append(container_mid);
            }
        }
        after_opt_observer.append(container_thumbnails);
        after_opt_observer.append($('<div>',{'style' : "clear:both"}));
    }

    observation_container.append(after_opt_observer);

    return observation_container;
}

function build_link(title,href)
{
    return $('<a>',{'href' : href}).html(title);
}

function build_img_link(iclass, href,src,img_title,onclick)
{
    if (iclass !== '')
    {
        if (typeof (href) === 'undefined') {
            if (typeof (onclick) === 'undefined')
                return $('<em>', {
                    'class': iclass,
                    'title': img_title
                });
                else
                return $('<em>', {
                    'onclick': onclick,
                    'class': iclass,
                    'title': img_title
                });
        } else {
            if (typeof (onclick) === 'undefined')
                return $('<a>', {'class': "alink", 'href': href}).append($('<em>', {
                    'class': iclass,
                    'title': img_title
                }));
                else
                    return $('<a>', {
                        'onclick': onclick,
                        'class': "alink",
                        'href': href
                    }).append($('<em>', {
                        'class': iclass,
                        'title': img_title
                    }));
        }
    }
    else {
        if (typeof (href) === 'undefined') {
            if (typeof (onclick) === 'undefined')
                return $('<img>', {
                    'src': src,
                    'title': img_title,
                    'alt': img_title,
                    'style': 'margin-left:4px;vertical-align:bottom'
                });
                else
                return $('<img>', {
                    'onclick': onclick,
                    'src': src,
                    'title': img_title,
                    'alt': img_title,
                    'style': 'margin-left:4px;vertical-align:bottom;cursor: pointer;'
                });
        } else {
            if (typeof (onclick) === 'undefined')
                return $('<a>', {'class': "alink", 'href': href}).append($('<img>', {
                    'src': src,
                    'title': img_title,
                    'alt': img_title,
                    'style': 'margin-left:4px;vertical-align:bottom'
                }));
                else
                return $('<a>', {
                    'onclick': onclick,
                    'class': "alink",
                    'href': href
                }).append($('<img>', {
                    'src': src,
                    'title': img_title,
                    'alt': img_title,
                    'style': 'margin-left:4px;vertical-align:bottom'
                }));
        }
    }
}

function build_observer(opt_observer_info)
{
    var opt_observer_info_container = $('<div>',{'class' : "opt_observer_info"});
    var observer_html = "";
    $.each(opt_observer_info, function (index)
    {
        var opt_observer_info_i = opt_observer_info[index];
        observer_html += "<span id_sighting='" + opt_observer_info_i.id_sighting + "'>[<span class='reload'></span>";
        if(typeof(opt_observer_info_i.opt_before_author_image_links)!=='undefined')
        {
            var bf_author_image_links = opt_observer_info_i.opt_before_author_image_links;
            $.each(bf_author_image_links, function (index)
            {
                var img_link = bf_author_image_links[index];
                observer_html += build_img_link(img_link.class, img_link.href,img_link.img,img_link.img_title)[0].outerHTML;
            });
        }

        if(typeof(opt_observer_info_i.opt_count_string)!=='undefined')
        {
            observer_html += opt_observer_info_i.opt_count_string;
        }

        if(typeof(opt_observer_info_i.opt_full_time)!=='undefined')
        {
            observer_html += opt_observer_info_i.opt_full_time;
        }

        observer_html += " "+opt_observer_info_i.author_string;

        if(typeof(opt_observer_info_i.opt_edit_view_button)!=='undefined')
        {
            observer_html += opt_observer_info_i.opt_edit_view_button;
        }

        if(typeof(opt_observer_info_i.opt_delete_button)!=='undefined')
        {
            observer_html += opt_observer_info_i.opt_delete_button;
        }

        if(typeof(opt_observer_info_i.opt_after_edit_delete_buttons)!=='undefined')
        {
            var after_edit_delete_buttons = opt_observer_info_i.opt_after_edit_delete_buttons;
            $.each(after_edit_delete_buttons, function (index)
            {
                var img_link = after_edit_delete_buttons[index];
                observer_html += build_img_link(img_link.class, img_link.href,img_link.img,img_link.img_title,img_link.onclick)[0].outerHTML;
            });
        }
        observer_html += "]</span><br/>";

    });
    observer_html += "";
    return opt_observer_info_container.html(observer_html);
}

function build_extended_detail(id, color, type, title)
{
    var extended_container = $('<div>',{'class':'extended_container'});

    var inside_html = '<div style="float:left;-moz-border-radius:10px;border-radius:10px;background-color:'+color+';height:20px;width:180px;margin:5px;overflow:hidden;cursor:pointer;cursor:hand;padding:0;padding-left:5px" class="extended_detail_button" id_feature="'+type+'" id_obs="'+id+'" id="'+type+'_'+id+'">';

    inside_html += '<img class="plus" style="margin:6px;float:left;" alt="" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/bullet_plus.gif" border="0" height="9" width="9"/>';
    inside_html += '<img class="minus" style="margin:6px;float:left;display:none" alt="" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/bullet_minus.gif" border="0" height="9" width="9"/>';
    inside_html += '<img class="imgProcessing" style="float:left;display:none;margin-right:5px;margin-top:2px" alt="" title="" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/wait.gif" border="0" height="16" width="16"/>';
    inside_html += '<div style="margin-top:4px;">'+title+'</div>';
    inside_html += '<div style="clear:both"></div>';
    inside_html += '<div class="bodytext" style="margin:5px" id="content_'+type+'_'+id+'"></div>';

    inside_html += '</div>';
    inside_html += '<div style="clear:both"></div>';

    return extended_container.html(inside_html);
}

function link_sighting_details(id)
{
    if(load_sync)
    {
        var link = 'https://www.faune-france.org/index.php?m_id=54&id='+id;
        location.href = link;
    }
    else
    {
        var link = 'https://www.faune-france.org/index.php?m_id=1370&ajax=y&backlink=skip&id='+id;
        detail_ajax_load(link);
    }
}

function link_sighting_media_details(mid)
{
    var link = 'https://www.faune-france.org/index.php?m_id=1370&ajax=y&backlink=skip&mid='+mid;
    detail_ajax_load(link);
}

function link_sighting_validation_details(id)
{
    var link = 'https://www.faune-france.org/index.php?m_id=1370&pnl=v&ajax=y&backlink=skip&id='+id;
    detail_ajax_load(link);
}

function detail_ajax_load(link)
{
    popClick($('<table>',{'id' : "detail_content", 'style' : 'width:100%'}));
    $("#detail_content").html('<em class="fa-solid fa-spinner fa-spin fa-1x-spin"></em>');
    $("#detail_content").load(link);
    scroll_positon = $(document).scrollTop().valueOf();
    window.scrollTo(0, 0);
}

function popClick(content) {
    var build_main_div = $('<div>', {
        id: "popup_name",
        'style': "max-width:1600px",
        'class': "popup_block"
    });

    var close_image = $('<div>',{
        'class' : "btn btn-close-circ",
        'style' : "float:right;position:relative;bottom:12px;margin-right:0;margin-top:1.2rem;cursor:pointer;"
    });

    //Register click event on close box
    close_image.click(function(){
        $("#popup_name").remove();
        $("#fade").remove();
        window.scrollTo(0, scroll_positon);
        $("#ajaxErrorMessageDisplayInit").attr('id','ajaxErrorMessageDisplay');
    });

    var floatDiv = $('<div>', {'style' : 'z-index:1;position:absolute;right:20px;margin-top:10px;'});

    //Move error message inside the popup box (so we can see the result)
    $("#ajaxErrorMessageDisplay").attr('id','ajaxErrorMessageDisplayInit');
    var errorMessageDiv = $('<div>', {'id' : 'ajaxErrorMessageDisplay'});

    build_main_div.html(content);

    close_image.appendTo(floatDiv);
    errorMessageDiv.prependTo(build_main_div);
    floatDiv.prependTo(build_main_div);
    $('body').append(build_main_div);

    var page_margin = parseInt($('#td-full-content').css('margin-left'));
    var page_witdh = 800;
    var space_above = 80;
    var popMargLeft = 0;

    if (page_margin === 0)
        page_witdh = $('#td-full-content').width() - 160;
    else
        page_witdh = $('#td-full-content').width() + page_margin;


    //Faire apparaitre la pop-up et ajouter le bouton de fermeture

    $('#popup_name').fadeIn().css({
        'width': Number(page_witdh - (page_margin != 0 ? 10 : 0))
    });

    var css = {};
    //Recuperation du margin, qui permettra de centrer la fenetre - on ajuste de 80px en conformite avec le CSS
    if (page_margin === 0) {
        popMargLeft = ((page_witdh + 80) / 2) - parseInt($('#ornithobody').css('margin-left'));
        css.left = "50%";
    }
    else {
        popMargLeft = -5;
        css.left = "0%";
    }

    css.top = space_above;
    css['margin-left'] = -popMargLeft;

    //On affecte le margin
    $('#popup_name').css(css);

    //Effet fade-in du fond opaque
    $('body').append('<div id="fade"></div>'); //Ajout du fond opaque noir

    //Apparition du fond - .css({'filter' : 'alpha(opacity=80)'}) pour corriger les bogues de IE
    $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn();

    return false;
}

function get_visual_js(id_media, alt, final_size, full_web_path, prefix, border, name_prefix, is_hidden, is_png, code)
{
    var media_string = '';

    var search_index = full_web_path.lastIndexOf('/');

	if(typeof code !== 'undefined') {
		var mname = code;
		var div_id = name_prefix + "-list-" + final_size + "-" + mname;
	}
	else {
		var mname = full_web_path.substr(search_index + 1, full_web_path.length - search_index);
		var div_id = name_prefix + "-list-" + final_size + "-" + mname.substr(1, mname.indexOf(".") - 1);
	}
    if (border)
    {
        media_string += "<div id=\"w-"+div_id+"\" style=\"display:block;width:34px;height:18px;margin:20px auto\">";

                media_string += '<em class="fa-solid fa-spinner fa-spin fa-1x-spin"></em>';
        
        media_string += "</div>";
        media_string += "<div id=\""+div_id+"\" style=\"display:none;margin:0 auto\">";
        media_string += "<div class=\"container\">";
        media_string += is_png? "<div style=\"position:relative;left:0;top:0;background:white\">" : ""; //Because png has transparency if we display a waveform with transparency we don't want to see black shadow from above container -> add white background
    }

        media_string += "<div style=\"position: relative;\">";
    
    media_string += "<img ";
    media_string += 'class="core-gallery-img" ';

    if (border)
    {
        media_string += " onload=\"document.getElementById('"+div_id+"').style.display='block';";
        media_string += " document.getElementById('w-"+div_id+"').style.display='none';";
        media_string += " document.getElementById('"+div_id+"').style.height=this.height+'px';";
        media_string += " document.getElementById('"+div_id+"').style.width=this.width+'px'; \"";
    }

    media_string += " style=\"display:block; margin: 0 auto;\" border=\"0\" title=\""+alt+"\" alt=\""+alt+"\" src=\""+full_web_path+"\" " + (border == 2 ? 'style="padding-top: 5px;"' : '') + "/>";

        if(is_hidden)
    media_string += "<div id=\""+name_prefix +"_hidden_"+id_media+"\" style=\"position: absolute;top:3px;left:3px;\"><span class=\"bsa bi-red-key\"></span></div></div>";
    else
    media_string += "<div id=\""+name_prefix +"_hidden_"+id_media+"\" style=\"display:none;position: absolute;top:3px;left:3px;\"><span class=\"bsa bi-red-key\"></span></div></div>";
    
    if (border)
    {
        media_string += is_png? "</div>":"";
        media_string += "</div>";
        media_string += "</div>";
    }

    return media_string;
}


</script>
             <script>
                //<![CDATA[

            function print_svg_javascript(svg)
            {
                var ret_string = '';

                if (svg != '')
                {
                    ret_string += "<svg style=\"padding-left:5px;padding-right:5px\" width=\"12\" height=\"12\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><g>";
                    ret_string += svg;
                    ret_string += "</g></svg>";
                }

                return ret_string;
            }

            function generate_image(species_array, day_number, is_hidden, is_admin_hidden, is_new, is_second_hand, no_link, show_transparent, is_favorite, protocol_name, protocol_svg, admin_hidden_type)
            {
                var color = "transparent";
                var alt = '' + 'Espèce commune';
                var atlas_start = species_array['atlas_start'];
                var atlas_end = species_array['atlas_end'];
                var category = species_array['category'];
                var has_synonyms = 0;

                                var ret_string = "";

                if(is_admin_hidden !=0)
                {
                    if(admin_hidden_type == 'refused')
                    {
                        ret_string += '<em class="bsa bsa-refused" title="La donnée ne peut pas être prise en compte (documentation absente ou insuffisante, donnée non homologuée, etc.)"></em>';
                    }
                    else if(admin_hidden_type == 'incomplete')
                    {
                        ret_string += '<em class="bsa bsa-incomplete" title="La donnée est correcte, demander un complément d\'information"></em>';
                    }
                    else
                    {
                        ret_string += '<em class="bsa bsa-question" title="La donnée est probablement incorrecte, demander une modification"></em>';
                    }
                }

                if (is_new !=0)
                    ret_string += '<img title="Nouveau depuis ma dernière visite" border="0" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/new_small.gif" />';

                if(protocol_name != '') //Note : alt and title are empty because normally in php we would do a $language->get_string('OBSERVATIONS_TEXT_NAME_' . $protocol_name) but we have access to protocol_name only in javascript but there is no equivalent to $language->get_string in javascript... we should print all the protocols before execution and then print from there? (same for rarity_committee)
                {
                    if (protocol_name == 'full_form')
                        ret_string += '<em class="bsa ba-full-form" title="Cette donnée fait partie d\'une liste d\'espèces complète."></em>';
                            else if  (protocol_name == 'partial_form')
                                ret_string += '<em class="bsa ba-partial-form" title="Cette donnée provient d\'une liste incomplète"></em>';
                            else
                                ret_string += print_svg_javascript(protocol_svg);
                        }

                        if (is_second_hand !=0)
                            ret_string += '<em class="bsa bsa-second-hand" title="ADD_MAIN_FORM_TEXT_SECOND_HAND"></em>';

                        if (is_hidden !=0)
                            ret_string += '<em class="bsa bi-yellow-key" title="Donnée protégée"></em>';

                        if (is_favorite !=0)
                            ret_string += '<em class="bsa ba-fav" title="DISPLAY_PAGE_TEXT_FAVORITE"></em>';

                        if(typeof(species_array['rarity_committee'])!='undefined')
                        {
                            for(committee in species_array['rarity_committee'])
                            {
                                var status = species_array['rarity_committee'][committee];
                                var committee_status_img = committee+'_'+status+'.gif';
                                committee_status_img.toLowerCase();
                                ret_string += '<img border="0" title="Homologation" src="https://cdnfiles2.biolovision.net/www.faune-france.org/images/'+committee_status_img.toLowerCase()+'"/>';
                            }
                        }

                                                    if(category == 'A')
                            {
                                color = "red";
                                alt = '' + 'Attention : détermination très complexe ! Examen approfondi nécessaire : biométrie, observation de la formule alaire, de la dentition, des pièces copulatrices, analyses acoustique ou ADN par ex. Pour être validée, cette donnée doit être documentée (mention des critères discriminants observés, photos, enregistrements sonores)';
                            }

                            if(category == 'B' || category == 'BH')
                            {
                                color = "orange";
                                alt = '' + 'Attention : détermination sur le terrain qui nécessite un examen détaillé ! Observation des critères à la longue-vue (vertébrés), à la loupe à main (invertébrés) ou détermination acoustique. Pour être validée, cette donnée doit être documentée (mention des critères discriminants observés, photos, enregistrements sonores).';
                            }

                            if(category == 'H' || category == 'BH')
                            {
                                if (day_number <= 46 || day_number >= 334)
                                {
                                    color = "blue";
                                    alt = '' + 'Attention : cette espèce est souvent confondue avec d\'autres par les observateurs les moins expérimentés. Merci de joindre une photo si possible afin que nous puissions confirmer votre détermination.';
                                }
                            }

                            if (show_transparent!=0 || color != 'transparent')
                            {
                                ret_string += '<em title="' + alt + '" class="bsa ba-'+color+'"></em>';
                            }
                            
                switch(has_synonyms)
                {
                    case 1:
                        ret_string += '<em class="bsa bsa-synonym" title="Taxon synonyme"></em>';
                        break;
                    case 2:
                        break;
                }


                return ret_string;
            }
                // ]]>
            </script>
        </div><!-- responsive footer start here -->

</div> <!-- td-page-content -->

</div> <!-- td-full-content -->
<div style="clear:both"></div>
<div class="footer logo-footer">
	</div>
</div> <!-- maincontent -->

<div class="clearfix"></div>

<div class="footer copyrightline">
            <a class="alink" style="margin-left:0.25rem;margin-right:0.25rem" href="https://www.faune-france.org/index.php?m_id=22&item=7">Mentions légales</a>
                <a class="alink" style="margin-left:0.25rem;margin-right:0.25rem" href="https://www.faune-france.org/index.php?m_id=22&item=9">Contacts</a>
                <a class="alink" style="margin-left:0.25rem;margin-right:0.25rem" href="https://www.faune-france.org/index.php?m_id=22&item=8">Crédits</a>
        </div>

<div class="clearfix"></div>


<div style="margin:2rem">Projet porté par la LPO France, en collaboration avec un réseau d’associations partenaires.</div>

<div class="clearfix"></div>

</div> <!-- ornithobody -->
<script language="javascript" src="https://cdnfiles1.biolovision.net/common/js/responsive_12.js"></script>
<script>
	// <![CDATA[
	var responsive;
	$(function() {
		responsive = responsiveBuilder();
		responsive.init();

        
        //Page content - problems with details edition on the phone.
		var page = $("#td-page-content"), detail_container = $("#detail-container");
		if(page.length && detail_container.length) {
			if(page.width() < detail_container.width())
//				detail_container.width(page.width());
				page.css("overflow", "auto");
		}
	});
	// ]]>
</script>
</body>
<!-- responsive footer end here -->
</html>
